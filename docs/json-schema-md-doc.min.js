(()=>{"use strict";class t{constructor(t,e){this.schema=null,this.response="",this.errors=[],this.pathDivider="/",t&&this.load(t),e&&this.setOptions(e)}load(t){if(this.errors=[],"string"==typeof t)try{this.schema=JSON.parse(t)}catch(t){this.error("invalid json: "+t.message)}else this.schema=t;return this}setOptions(t){return Object.assign(this,t),this}generate(){if(this.response="",this.errors.length<1)try{this.generateChildren("",this.schema,0,"#")}catch(t){this.error(t.toString())}return this.generateResponse()}generateResponse(){return this.errors.length>0?this.errors.join("\n"):this.response}generateChildren(t,e,i,s){if("string"==typeof(null==e?void 0:e.$id)&&(s="#"+e.$id),this.determineType(e),this.typeGeneric(t,e,i,s),e.type.forEach((r=>{this.getTypeMethod(r)(t,e,i,s)})),"object"==typeof e.definitions&&Object.keys(e.definitions).length>0){s+="/definitions",this.writeHeader("definitions",i,s);for(const t in e.definitions){const r=s+this.pathDivider+t;this.writeTerm(t,i),this.generateChildren(t,e.definitions[t],i+1,r)}}}determineType(t){return"string"==typeof t.type?(t.type=[t.type],t.type):(Array.isArray(t.type)||(t.type=[],this.hasAnyProperty(t,["items","additionalItems","minItems","maxItems","uniqueItems","contains"])&&t.type.push("array"),this.hasAnyProperty(t,["minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf"])&&t.type.push("number"),this.hasAnyProperty(t,["required","properties","additionalProperties","patternProperties","minProperties","maxProperties","propertyNames","dependencies"])&&t.type.push("object"),this.hasAnyProperty(t,["maxLength","minLength","pattern","format"])&&t.type.push("string")),t.type)}hasProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}hasAnyProperty(t,e){return e.some((e=>this.hasProperty(t,e)))}typeGeneric(t,e,i,s){this.writeHeader(e.title,i,s),this.writeDescription(e.description,i,s),this.writeType(e.type,i,s),this.writePath(i,s),this.writeSchema(e.$schema,i),this.writeRef(e.$ref,i),this.writeId(e.$id,i,s),this.writeComment(e.$comment,i,s),this.writeExamples(e.examples,i,s),this.writeEnum(e.enum,i),this.writeDefault(e.default,i,s),this.writeConst(e.const,i),this.writeConditionalIf(e.if,i),this.writeConditionalThen(e.then,i),this.writeConditionalElse(e.else,i),this.writeContentEncoding(e.contentEncoding,i),this.writeContentMediaType(e.contentMediaType,i)}typeArray(t,e,i,s){this.writeAdditionalItems(e.additionalItems,i),this.writeItemsMinMax(e.minItems,e.maxItems,i),this.notEmpty(e.items)&&(this.writeSectionName("Items",i+1,s+"/items"),Array.isArray(e.items)?e.items.forEach((t=>{this.generateChildren("item",t,i+1,s+"/items")})):this.notEmpty(e.items)&&"object"==typeof e.items&&this.generateChildren("item",e.items,i+1,s+"/items")),this.writeContains(e.contains,i)}typeBoolean(t,e,i,s){}typeNull(t,e,i,s){}typeNumber(t,e,i,s){this.writeMinimumMaximum(e.minimum,e.maximum,i),this.writeExclusiveMinimumMaximum(e.exclusiveMinimum,e.exclusiveMaximum,i),this.writeMultipleOf(e.multipleOf,i)}typeString(t,e,i,s){this.writeFormat(e.format,i),this.writePattern(e.pattern,i),this.writeMinMaxLength(e.minLength,e.maxLength,i)}typeObject(t,e,i,s){var r;this.writeUniqueItems(e.uniqueItems,i);const n=null!==(r=e.required)&&void 0!==r?r:[],h=e.properties||{};this.writeAdditionalProperties(e.additionalProperties,i),this.writeMinMaxProperties(e.minProperties,e.maxProperties,i),this.writePropertyNames(e.propertyNames,i),this.writeSectionName("Properties",i,s),s+="/properties";for(const t in h){const e=s+this.pathDivider+t,r=h[t],o=n.includes(t);this.writePropertyName(t,i+1,e,o),this.generateChildren(t,r,i+2,e)}this.writeDependencies(e.dependencies,i)}typeUnknown(t,e,i,s){}getTypeMethod(t){switch(t.toLowerCase()){case"string":return this.typeString.bind(this);case"integer":case"number":return this.typeNumber.bind(this);case"object":return this.typeObject.bind(this);case"array":return this.typeArray.bind(this);case"boolean":return this.typeBoolean.bind(this);case"null":return this.typeNull.bind(this);default:return this.typeUnknown.bind(this)}}valueMinMax(t,e){return this.notEmpty(t)&&this.notEmpty(e)?"between "+t+" and "+e+"\n":this.notEmpty(t)?" &ge; "+t+"\n":this.notEmpty(e)?" &le; "+e+"\n":""}valueMinMaxExclusive(t,e){let i="";return this.notEmpty(t)&&(i+=" > "+t+"\n"),this.notEmpty(t)&&this.notEmpty(e)&&(i+=" & "),this.notEmpty(e)&&(i+=" < "+e+"\n"),i}valueBool(t){return"string"==typeof t?t:t?"true":"false"}valueFormat(t){return"boolean"==typeof t?this.valueBool(t):"string"==typeof t?'"'+t+'"':t}refLink(t){return"#"!==t[0]&&"http"!==t.substring(0,4).toLowerCase()&&(t="#"+this.slugify(t)),t}escapeLink(t){return t.replace("$","\\$")}slugify(t){return t.toString().toLowerCase().replace(/\s+/g,"-").replace(/_/g,"-").replace(/&/g,"-and-").replace(/[^a-zA-Z0-9-.]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}empty(t){return null==t||"string"==typeof t&&t.length<1||Array.isArray(t)&&t.length<1}notEmpty(t){return!this.empty(t)}error(t){return this.errors.push(t),this}}class e extends t{constructor(){super(...arguments),this.indentChar="\t",this.pathDivider="/",this.objectNotation="&thinsp;.&thinsp;",this.footer="\n*Generated with [OntoDevelopment/json-schema-doc](https://github.com/OntoDevelopment/json-schema-doc)*",this.useHtml=!0,this.emphasisChar="*"}generateResponse(){return this.errors.length>0?this.errors.join("\n"):(this.response+=this.footer,this.response)}writeAdditionalItems(t,e=1){return this.empty(t)?this:t?this.writeLine("This schema "+this.underline("does not")+" accept additional items.",e):this.writeLine("This schema accepts additional items.",e)}writeItemsMinMax(t,e,i=1){return(this.notEmpty(t)||this.notEmpty(e))&&this.writeLine("Item Count: "+this.valueMinMax(t,e),i),this}writeAdditionalProperties(t,e=1){return this.empty(t)?this:t?this.writeLine("This schema accepts additional properties.",e):this.writeLine("This schema "+this.underline("does not")+" accept additional properties.",e)}writeMinMaxProperties(t,e,i=1){return(this.notEmpty(t)||this.notEmpty(e))&&this.writeLine("Property Count: "+this.valueMinMax(t,e),i),this}writeComment(t,e=1,i){if(this.empty(t)||"string"!=typeof t)return this;const s=this.useHtml?"<br/>":"\n";return this.writeLine(this.bold("Comment",i)+s+this.italic(t),e)}writeConst(t,e=1){return this.notEmpty(t)&&this.writeLine("Constant value: "+this.valueFormat(t),e),this}writeConditionalIf(t,e=1){return this.notEmpty(t)&&(this.writeLine("If: ",e),this.generateChildren("if",t,e+1,"")),this}writeConditionalThen(t,e=1){return this.notEmpty(t)&&(this.writeLine("Then: ",e),this.generateChildren("then",t,e+1,"")),this}writeConditionalElse(t,e=1){return this.notEmpty(t)&&(this.writeLine("Else: ",e),this.generateChildren("else",t,e+1,"")),this}writeContentEncoding(t,e=1){return this.notEmpty(t)&&this.writeLine("Content Encoding: "+t,e),this}writeContentMediaType(t,e=1){return this.notEmpty(t)&&this.writeLine("Content Media Type: "+t,e),this}writeContains(t,e=1){return this.notEmpty(t)&&(this.writeLine("Contains: ",e),this.generateChildren("contains",t,e+1,"")),this}writeDefault(t,e=1,i){return this.notEmpty(t)&&this.writeLine("Default: "+this.valueFormat(t),e),this}writeDescription(t,e=1,i){return this.notEmpty(t)&&"string"==typeof t&&this.writeLine(this.italic(t.replace("\n","<br>")),e),this}writeDependencies(t,e=1){return this.notEmpty(t)&&(this.writeLine("Dependencies: ",e),this.writeList(Object.keys(t),e+1)),this}writeEnum(t,e=1){return this.notEmpty(t)&&"object"==typeof t&&(this.writeLine("The value is restricted to the following: ",e),this.writeList(t,e+1)),this}writeFormat(t,e=1){return this.notEmpty(t)&&this.writeLine('String format must be a "'+t+'"',e),this}writeExamples(t,e=1,i){return this.notEmpty(t)&&"object"==typeof t&&(this.writeLine("Example values: ",e),this.writeList(t,e+1)),this}writeHeader(t,e=1,i){return this.notEmpty(t)&&this.writeLine("#".repeat(Math.min(e+1,5))+" "+t,e),this}writeId(t,e=1,i){return this.notEmpty(t)&&"string"==typeof t&&this.writeLine(this.bold("&#36;id: "+t,t),e),this}writeList(t,e=1){return this.notEmpty(t)&&t.forEach(((t,i)=>{this.indent(e,!1," "+(i+1)),this.response+=". "+this.valueFormat(t)+"\n"})),this}writeMinimumMaximum(t,e,i=1){return(this.notEmpty(t)||this.notEmpty(e))&&this.writeLine("Range: "+this.valueMinMax(t,e),i),this}writeExclusiveMinimumMaximum(t,e,i=1){return(this.notEmpty(t)||this.notEmpty(e))&&this.writeLine("Exclusive Range: "+this.valueMinMaxExclusive(t,e),i),this}writeMultipleOf(t,e=1){return this.notEmpty(t)&&this.writeLine("The value must be a multiple of `"+t+"`",e),this}writePattern(t,e=1){return this.notEmpty(t)&&this.writeLine("The value must match this pattern: `"+t+"`",e),this}writeMinMaxLength(t,e,i=1){return(this.notEmpty(t)||this.notEmpty(e))&&this.writeLine("Length: "+this.valueMinMax(t,e),i),this}writePropertyNames(t,e=1){return"string"==typeof(null==t?void 0:t.pattern)&&this.writeLine("Property names must match this pattern: `"+t.pattern+"`",e),this}writePropertyName(t,e=1,i,s=!1){return this.indent(e),this.response+=this.bold(t,i),s&&(this.response+=" `required`"),this.response+="\n",this}writeRef(t,e=1){return this.notEmpty(t)&&"string"==typeof t&&this.writeLine("&#36;ref: ["+this.escapeLink(t)+"]("+this.refLink(t)+")",e),this}writePath(t=1,e){return this.notEmpty(e)&&this.writeLine(this.italic("path: "+e,e.replace("#","")),t),this}writeSchema(t,e=1){return"string"==typeof t&&t.length>0&&this.writeLine("&#36;schema: ["+t+"]("+this.refLink(t)+")",e),this}writeSectionName(t,e=1,i){return this.notEmpty(t)&&this.writeLine(this.boldItalic(t),e),this}writeTerm(t,e=1){return this.notEmpty(t)&&this.writeLine(this.boldItalic(t),e),this}writeType(t,e=1,i){return this.notEmpty(t)&&(Array.isArray(t)&&t.length>1?this.writeLine("Types: `"+t.join("`, `")+"`",e):this.writeLine("Type: `"+t+"`",e)),this}writeUniqueItems(t,e=1){return this.notEmpty(t)&&t&&this.writeLine("Each item must be unique",e),this}bold(t,e){return this.useHtml&&e?this.tag("b",t,e):this.emphasize(t,2)}italic(t,e){return this.useHtml&&e?this.tag("i",t,e):this.emphasize(t,1)}boldItalic(t,e){return this.useHtml&&e?this.tag("b",this.italic(t),e):this.emphasize(t,3)}underline(t,e){return this.useHtml?this.tag("u",t,e):t}tag(t,e,i){return`<${t} id="${i=this.slugify(i||e)}">${e}</${t}>`}emphasize(t,e){const i=this.emphasisChar.repeat(e);return i+t+i}code(t){return"`"+t+"`"}valueFormat(t){return"true"===t||"false"===t?this.italic(t):"boolean"==typeof t?this.italic(this.valueBool(t)):"string"==typeof t?this.italic('"'+t+'"'):this.code(t)}writeLine(t="",e=1){return this.indent(e),this.response+=t+"\n",e<1&&(this.response+="\n"),this}indent(t,e=!1,i=" - "){t>1&&(this.response+=(e||this.indentChar).repeat(t-1)),t>0&&(this.response+=i)}setUseHtml(t){return this.useHtml=t,this}}window.JSONSchemaMarkdownDoc=class extends e{constructor(t){super(t),this.footer="\n*Generated with [json-schema-md-doc](https://brianwendt.github.io/json-schema-md-doc/)*\n",this.footer+="*"+new Date+"*"}}})();